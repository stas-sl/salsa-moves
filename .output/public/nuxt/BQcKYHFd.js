import{_ as ve}from"./CsCKG_0t.js";import{p as L,m as D,b as n,J as fe,K as J,L as me,M as pe,N as P,x as T,O as ye,P as U,r as H,Q as ge,g as E,R as he,h as be,u as Se,S as we,I as G,e as ke,C as x,T as Ve,U as xe,V as Z,z as Te,W as Be,X as _e,A as Ce,o as M,B as N,w as h,d as A,t as ee,G as K,E as Ae}from"./Cgwfw3O2.js";import{m as ne,b as se,d as j,q as Pe,r as Ee,s as Me,t as Ne,v as Ie,w as Re,x as He,y as $e,z as q,A as Le,B as De,C as je,D as Oe,E as Ue,k as z,o as Ke,F as We,V as ze,e as te,f as Ge,g as qe,j as Je,l as Fe,i as W,h as Qe,n as Xe}from"./wvYGFXtH.js";const re=L({text:String,...ne(),...se()},"VToolbarTitle"),ie=D()({name:"VToolbarTitle",props:re(),setup(e,a){let{slots:t}=a;return j(()=>{const f=!!(t.default||t.text||e.text);return n(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var y;return[f&&n("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(y=t.default)==null?void 0:y.call(t)])]}})}),{}}}),Ye=[null,"prominent","default","comfortable","compact"],ue=L({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ye.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Pe(),...ne(),...Ee(),...Me(),...se({tag:"header"}),...fe()},"VToolbar"),ae=D()({name:"VToolbar",props:ue(),setup(e,a){var w;let{slots:t}=a;const{backgroundColorClasses:f,backgroundColorStyles:y}=Ne(J(e,"color")),{borderClasses:l}=Ie(e),{elevationClasses:u}=Re(e),{roundedClasses:b}=He(e),{themeClasses:c}=me(e),{rtlClasses:m}=pe(),r=P(!!(e.extended||(w=t.extension)!=null&&w.call(t))),p=T(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),k=T(()=>r.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ye({VBtn:{variant:"text"}}),j(()=>{var B;const g=!!(e.title||t.title),s=!!(t.image||e.image),i=(B=t.extension)==null?void 0:B.call(t);return r.value=!!(e.extended||i),n(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},f.value,l.value,u.value,b.value,c.value,m.value,e.class],style:[y.value,e.style]},{default:()=>[s&&n("div",{key:"image",class:"v-toolbar__image"},[t.image?n(q,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):n($e,{key:"image-img",cover:!0,src:e.image},null)]),n(q,{defaults:{VTabs:{height:U(p.value)}}},{default:()=>{var d,S,V;return[n("div",{class:"v-toolbar__content",style:{height:U(p.value)}},[t.prepend&&n("div",{class:"v-toolbar__prepend"},[(d=t.prepend)==null?void 0:d.call(t)]),g&&n(ie,{key:"title",text:e.title},{text:t.title}),(S=t.default)==null?void 0:S.call(t),t.append&&n("div",{class:"v-toolbar__append"},[(V=t.append)==null?void 0:V.call(t)])])]}}),n(q,{defaults:{VTabs:{height:U(k.value)}}},{default:()=>[n(Le,null,{default:()=>[r.value&&n("div",{class:"v-toolbar__extension",style:{height:U(k.value)}},[i])]})]})]})}),{contentHeight:p,extensionHeight:k}}}),Ze=L({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function et(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=a;let f=0,y=0;const l=H(null),u=P(0),b=P(0),c=P(0),m=P(!1),r=P(!1),p=T(()=>Number(e.scrollThreshold)),k=T(()=>ge((p.value-u.value)/p.value||0)),w=()=>{const g=l.value;if(!g||t&&!t.value)return;f=u.value,u.value="window"in g?g.pageYOffset:g.scrollTop;const s=g instanceof Window?document.documentElement.scrollHeight:g.scrollHeight;if(y!==s){y=s;return}r.value=u.value<f,c.value=Math.abs(u.value-p.value)};return E(r,()=>{b.value=b.value||u.value}),E(m,()=>{b.value=0}),he(()=>{E(()=>e.scrollTarget,g=>{var i;const s=g?document.querySelector(g):window;s&&s!==l.value&&((i=l.value)==null||i.removeEventListener("scroll",w),l.value=s,l.value.addEventListener("scroll",w,{passive:!0}))},{immediate:!0})}),be(()=>{var g;(g=l.value)==null||g.removeEventListener("scroll",w)}),t&&E(t,w,{immediate:!0}),{scrollThreshold:p,currentScroll:u,currentThreshold:c,isScrollActive:m,scrollRatio:k,isScrollingUp:r,savedScroll:b}}const tt=L({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ue(),...De(),...Ze(),height:{type:[Number,String],default:64}},"VAppBar"),at=D()({name:"VAppBar",props:tt(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const f=H(),y=Se(e,"modelValue"),l=T(()=>{var S;const d=new Set(((S=e.scrollBehavior)==null?void 0:S.split(" "))??[]);return{hide:d.has("hide"),fullyHide:d.has("fully-hide"),inverted:d.has("inverted"),collapse:d.has("collapse"),elevate:d.has("elevate"),fadeImage:d.has("fade-image")}}),u=T(()=>{const d=l.value;return d.hide||d.fullyHide||d.inverted||d.collapse||d.elevate||d.fadeImage||!y.value}),{currentScroll:b,scrollThreshold:c,isScrollingUp:m,scrollRatio:r}=et(e,{canScroll:u}),p=T(()=>l.value.hide||l.value.fullyHide),k=T(()=>e.collapse||l.value.collapse&&(l.value.inverted?r.value>0:r.value===0)),w=T(()=>e.flat||l.value.fullyHide&&!y.value||l.value.elevate&&(l.value.inverted?b.value>0:b.value===0)),g=T(()=>l.value.fadeImage?l.value.inverted?1-r.value:r.value:void 0),s=T(()=>{var V,o;if(l.value.hide&&l.value.inverted)return 0;const d=((V=f.value)==null?void 0:V.contentHeight)??0,S=((o=f.value)==null?void 0:o.extensionHeight)??0;return p.value?b.value<c.value||l.value.fullyHide?d+S:d:d+S});we(T(()=>!!e.scrollBehavior),()=>{ke(()=>{p.value?l.value.inverted?y.value=b.value>c.value:y.value=m.value||b.value<c.value:y.value=!0})});const{ssrBootStyles:i}=je(),{layoutItemStyles:B}=Oe({id:e.name,order:T(()=>parseInt(e.order,10)),position:J(e,"location"),layoutSize:s,elementSize:P(void 0),active:y,absolute:J(e,"absolute")});return j(()=>{const d=ae.filterProps(e);return n(ae,G({ref:f,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...B.value,"--v-toolbar-image-opacity":g.value,height:void 0,...i.value},e.style]},d,{collapse:k.value,flat:w.value}),t)}),{}}}),lt=L({...Ue({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),ot=D()({name:"VAppBarNavIcon",props:lt(),setup(e,a){let{slots:t}=a;return j(()=>n(z,G(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),nt=D()({name:"VAppBarTitle",props:re(),setup(e,a){let{slots:t}=a;return j(()=>n(ie,G(e,{class:"v-app-bar-title"}),t)),{}}});function st(e){return Ve()?(xe(e),!0):!1}function $(e){return typeof e=="function"?e():x(e)}const rt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const it=Object.prototype.toString,ut=e=>it.call(e)==="[object Object]",ce=()=>{};function I(e,a,t){return E(e,(y,l,u)=>{y&&a(y,l,u)},{...t,once:!1})}const F=rt?window:void 0;function ct(e){var a;const t=$(e);return(a=t==null?void 0:t.$el)!=null?a:t}function R(...e){let a,t,f,y;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,f,y]=e,a=F):[a,t,f,y]=e,!a)return ce;Array.isArray(t)||(t=[t]),Array.isArray(f)||(f=[f]);const l=[],u=()=>{l.forEach(r=>r()),l.length=0},b=(r,p,k,w)=>(r.addEventListener(p,k,w),()=>r.removeEventListener(p,k,w)),c=E(()=>[ct(a),$(y)],([r,p])=>{if(u(),!r)return;const k=ut(p)?{...p}:p;l.push(...t.flatMap(w=>f.map(g=>b(r,w,g,k))))},{immediate:!0,flush:"post"}),m=()=>{c(),u()};return st(m),m}function dt(e){return typeof e=="function"?e:typeof e=="string"?a=>a.key===e:Array.isArray(e)?a=>e.includes(a.key):()=>!0}function le(...e){let a,t,f={};e.length===3?(a=e[0],t=e[1],f=e[2]):e.length===2?typeof e[1]=="object"?(a=!0,t=e[0],f=e[1]):(a=e[0],t=e[1]):(a=!0,t=e[0]);const{target:y=F,eventName:l="keydown",passive:u=!1,dedupe:b=!1}=f,c=dt(a);return R(y,l,r=>{r.repeat&&$(b)||c(r)&&t(r)},u)}const vt={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function oe(e={}){const{reactive:a=!1,target:t=F,aliasMap:f=vt,passive:y=!0,onEventFired:l=ce}=e,u=Z(new Set),b={toJSON(){return{}},current:u},c=a?Z(b):b,m=new Set,r=new Set;function p(s,i){s in c&&(a?c[s]=i:c[s].value=i)}function k(){u.clear();for(const s of r)p(s,!1)}function w(s,i){var B,d;const S=(B=s.key)==null?void 0:B.toLowerCase(),o=[(d=s.code)==null?void 0:d.toLowerCase(),S].filter(Boolean);S&&(i?u.add(S):u.delete(S));for(const v of o)r.add(v),p(v,i);S==="meta"&&!i?(m.forEach(v=>{u.delete(v),p(v,!1)}),m.clear()):typeof s.getModifierState=="function"&&s.getModifierState("Meta")&&i&&[...u,...o].forEach(v=>m.add(v))}R(t,"keydown",s=>(w(s,!0),l(s)),{passive:y}),R(t,"keyup",s=>(w(s,!1),l(s)),{passive:y}),R("blur",k,{passive:!0}),R("focus",k,{passive:!0});const g=new Proxy(c,{get(s,i,B){if(typeof i!="string")return Reflect.get(s,i,B);if(i=i.toLowerCase(),i in f&&(i=f[i]),!(i in c))if(/[+_-]/.test(i)){const S=i.split(/[+_-]/g).map(V=>V.trim());c[i]=T(()=>S.every(V=>$(g[V])))}else c[i]=H(!1);const d=Reflect.get(s,i,B);return a?$(d):d}});return g}const yt={__name:"practice",setup(e){const{uid:a,moves:t,movesState:f,movesCounts:y,userSettings:l,updateMoveState:u}=Te(),b=Ae(),c=H(null),m=H(!1),r=()=>{m.value=!1;const o=t.value.filter(v=>{var O;return l.value.practiceOptions.states.includes(((O=f.value[`move-${v.move}`])==null?void 0:O.state)||"new")});c.value=o[Math.floor(Math.random()*o.length)]};let p=!1;const{space:k}=oe({passive:!1,onEventFired(o){o.code==="Space"&&o.type==="keydown"&&o.preventDefault()}}),{comma:w,period:g,keyP:s,digit1:i,digit2:B,digit3:d}=oe();function S(){return new Promise(o=>{V.value.$el.player.one("seeked",()=>{o()})})}I(k,()=>{m.value?r():m.value=!0}),I(s,()=>{if(m.value){const o=V.value.$el.player;o.paused()?o.play():o.pause()}}),I(i,()=>{var o;m.value&&u([{key:`move-${(o=c.value)==null?void 0:o.move}`,value:{state:"new"}}])}),I(B,()=>{var o;m.value&&u([{key:`move-${(o=c.value)==null?void 0:o.move}`,value:{state:"learning"}}])}),I(d,()=>{var o;m.value&&u([{key:`move-${(o=c.value)==null?void 0:o.move}`,value:{state:"review"}}])}),le(",",async()=>{if(m.value&&!p){p=!0;const o=V.value.$el.player;o.pause(),o.currentTime(o.currentTime()-1/30),await S(),p=!1}}),le(".",async()=>{if(m.value&&!p){p=!0;const o=V.value.$el.player;o.pause(),o.currentTime(o.currentTime()+1/30),await S(),p=!1}}),Be(()=>{r()});const V=_e("player");return(o,v)=>{const O=ve,de=Ce("video-player");return M(),N(Ke,null,{default:h(()=>[n(at,{color:"primary",density:"compact"},{prepend:h(()=>[n(ot)]),append:h(()=>[n(z,{icon:"mdi-dots-vertical"})]),default:h(()=>[n(O,{to:"/"},{default:h(()=>[n(We,{color:"white",icon:"mdi-arrow-left"})]),_:1}),n(nt,null,{default:h(()=>v[4]||(v[4]=[A("Practice")])),_:1})]),_:1}),n(Xe,null,{default:h(()=>[n(ze,{fluid:"",class:"pa-0 fill-height"},{default:h(()=>[n(te,{class:"fill-height d-flex flex-column w-100"},{default:h(()=>[n(Ge,{class:"pa-0 text-h2 text-center"},{default:h(()=>{var _;return[A(ee((_=x(c))==null?void 0:_.move),1)]}),_:1}),n(qe,{class:"pa-0 flex-grow-1 video-card-item"},{default:h(()=>{var _;return[x(m)?(M(),N(de,{key:0,src:`${x(b).public.mediaUrl}${(_=x(c))==null?void 0:_.name}`,playbackRate:1,enableSmoothSeeking:!0,playsinline:"",fill:"",loop:"",autoplay:"muted",responsive:"",ref_key:"player",ref:V,onLoadedmetadata:v[0]||(v[0]=C=>{C.target.player.userActive(!1),C.target.player.controls(!0)})},null,8,["src"])):K("",!0)]}),_:1}),n(Je,{class:"justify-center pa-0"},{default:h(()=>[x(m)?K("",!0):(M(),N(z,{key:0,onClick:v[1]||(v[1]=_=>m.value=!0),color:"primary",class:"my-2",variant:"flat"},{default:h(()=>v[5]||(v[5]=[A("Show answer (Space)")])),_:1})),x(m)?(M(),N(Fe,{key:1,location:"top center",transition:"slide-y-transition",offset:2},{activator:h(({props:_})=>{var C,Q;return[n(W,G(_,{color:{new:"primary",undefined:"primary",learning:"deep-purple-lighten-1",review:"success"}[(Q=x(f)[`move-${(C=x(c))==null?void 0:C.move}`])==null?void 0:Q.state],variant:"flat",density:"compact"}),{default:h(()=>{var X,Y;return[A(ee(((Y=x(f)[`move-${(X=x(c))==null?void 0:X.move}`])==null?void 0:Y.state)||"new"),1)]}),_:2},1040,["color"])]}),default:h(()=>[n(te,{style:{"background-color":"rgba(var(--v-theme-surface), 0.8)"}},{default:h(()=>[n(Qe,{variant:"flat",direction:"vertical","onUpdate:modelValue":v[2]||(v[2]=_=>{var C;return x(u)([{key:`move-${(C=x(c))==null?void 0:C.move}`,value:{state:_}}])})},{default:h(()=>[n(W,{class:"bg-primary mx-2",value:"new",density:"compact"},{default:h(()=>v[6]||(v[6]=[A(" new (1) ")])),_:1}),n(W,{class:"bg-deep-purple-lighten-1 mx-2",value:"learning",density:"compact"},{default:h(()=>v[7]||(v[7]=[A(" learning (2) ")])),_:1}),n(W,{class:"bg-success mx-2",value:"review",density:"compact"},{default:h(()=>v[8]||(v[8]=[A(" review (3) ")])),_:1})]),_:1})]),_:1})]),_:1})):K("",!0),x(m)?(M(),N(z,{key:2,onClick:v[3]||(v[3]=_=>r()),color:"primary",class:"my-2",variant:"flat"},{default:h(()=>v[9]||(v[9]=[A("Next (space)")])),_:1})):K("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{yt as default};
