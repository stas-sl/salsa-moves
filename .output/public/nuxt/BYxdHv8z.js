import{_ as G}from"./DYhe6uT4.js";import{g as D,am as k,ar as K,$ as P,a8 as N,C as T,r as R,aj as F,G as q,ak as I,o as C,al as h,w as M,b as V,a as $,t as J,ao as E,d as j,aq as Q}from"./De67zR07.js";import{T as U,P as z,V as H,Q as B,S as X}from"./rOkv3-fF.js";function Y(o){return K()?(P(o),!0):!1}function A(o){return typeof o=="function"?o():k(o)}const Z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ee=Object.prototype.toString,te=o=>ee.call(o)==="[object Object]",O=()=>{};function ne(o,r,s){return D(o,(p,m,f)=>{p&&r(p,m,f)},{...s,once:!1})}const W=Z?window:void 0;function oe(o){var r;const s=A(o);return(r=s==null?void 0:s.$el)!=null?r:s}function x(...o){let r,s,c,p;if(typeof o[0]=="string"||Array.isArray(o[0])?([s,c,p]=o,r=W):[r,s,c,p]=o,!r)return O;Array.isArray(s)||(s=[s]),Array.isArray(c)||(c=[c]);const m=[],f=()=>{m.forEach(l=>l()),m.length=0},_=(l,d,a,t)=>(l.addEventListener(d,a,t),()=>l.removeEventListener(d,a,t)),u=D(()=>[oe(r),A(p)],([l,d])=>{if(f(),!l)return;const a=te(d)?{...d}:d;m.push(...s.flatMap(t=>c.map(v=>_(l,t,v,a))))},{immediate:!0,flush:"post"}),i=()=>{u(),f()};return Y(i),i}const se={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function ae(o={}){const{reactive:r=!1,target:s=W,aliasMap:c=se,passive:p=!0,onEventFired:m=O}=o,f=N(new Set),_={toJSON(){return{}},current:f},u=r?N(_):_,i=new Set,l=new Set;function d(n,e){n in u&&(r?u[n]=e:u[n].value=e)}function a(){f.clear();for(const n of l)d(n,!1)}function t(n,e){var w,y;const g=(w=n.key)==null?void 0:w.toLowerCase(),L=[(y=n.code)==null?void 0:y.toLowerCase(),g].filter(Boolean);g&&(e?f.add(g):f.delete(g));for(const S of L)l.add(S),d(S,e);g==="meta"&&!e?(i.forEach(S=>{f.delete(S),d(S,!1)}),i.clear()):typeof n.getModifierState=="function"&&n.getModifierState("Meta")&&e&&[...f,...L].forEach(S=>i.add(S))}x(s,"keydown",n=>(t(n,!0),m(n)),{passive:p}),x(s,"keyup",n=>(t(n,!1),m(n)),{passive:p}),x("blur",a,{passive:!0}),x("focus",a,{passive:!0});const v=new Proxy(u,{get(n,e,w){if(typeof e!="string")return Reflect.get(n,e,w);if(e=e.toLowerCase(),e in c&&(e=c[e]),!(e in u))if(/[+_-]/.test(e)){const g=e.split(/[+_-]/g).map(b=>b.trim());u[e]=T(()=>g.every(b=>A(v[b])))}else u[e]=R(!1);const y=Reflect.get(n,e,w);return r?A(y):y}});return v}const ue={__name:"practice",setup(o){const{uid:r,moves:s,movesState:c,movesCounts:p,userSettings:m,updateMoveState:f}=F(),_=Q(),u=R(null),i=R(!1),l=()=>{i.value=!1;const a=s.value.filter(t=>{var v;return m.value.practiceOptions.states.includes(((v=c.value[`move-${t.move}`])==null?void 0:v.state)||"new")});u.value=a[Math.floor(Math.random()*a.length)]},{space:d}=ae({passive:!1,onEventFired(a){a.code==="Space"&&a.type==="keydown"&&a.preventDefault()}});return ne(d,()=>{i.value?l():i.value=!0}),q(()=>{l()}),(a,t)=>{const v=G,n=I("video-player");return C(),h(U,null,{default:M(()=>[V(X,null,{default:M(()=>[V(z,{fluid:""},{default:M(()=>{var e,w;return[V(v,{to:"/"},{default:M(()=>[V(H,{icon:"mdi-home"})]),_:1}),t[5]||(t[5]=$("h1",null,"Practice",-1)),$("h2",null,J((e=k(u))==null?void 0:e.move),1),k(i)?(C(),h(n,{key:0,src:`${k(_).public.mediaUrl}${(w=k(u))==null?void 0:w.name}`,loop:"",controls:"",autoplay:"muted",responsive:"",playbackRate:1,enableSmoothSeeking:!0,width:500,height:500,playsinline:"",onReady:t[0]||(t[0]=y=>y.target.player.userActive(!1))},null,8,["src"])):E("",!0),k(i)?E("",!0):(C(),h(B,{key:1,onClick:t[1]||(t[1]=y=>i.value=!0),color:"primary",class:"my-4"},{default:M(()=>t[3]||(t[3]=[j("Show answer")])),_:1})),k(i)?(C(),h(B,{key:2,onClick:t[2]||(t[2]=y=>l()),color:"primary",class:"my-4"},{default:M(()=>t[4]||(t[4]=[j("Next")])),_:1})):E("",!0)]}),_:1})]),_:1})]),_:1})}}};export{ue as default};
